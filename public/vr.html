<!DOCTYPE html>
<html>
    <head>
        <title>Cook'd VR</title>
        <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
        <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>
        <script src='/js/vr-grab.js'></script>
        <script src='/js/vr-cooking.js'></script>
        <script src='/js/vr-snap-patty.js'></script>
        <script src='/js/vr-element-info.js'></script>
        <script src='/js/vr-print-position.js'></script>
        <script src='/js/vr-get-burgers.js'></script>
        <script src='js/vr-make-patty.js'></script>
        <script src='js/vr-make-cheese.js'></script>
        <script src='js/vr-burger-info.js'></script>
        <script src='js/vr-get-height.js'></script>
        <script src='js/vr-patty-info.js'></script>
        <script src='js/vr-game-manager.js'></script>
        <script src='js/vr-add-body.js'></script>
    </head>    
    <body>
        <a-scene physics='debug:false'>
            <a-assets>
                <!-- <audio id="testSoundSrc" crossorigin="anonymous" src="assets/sound/burgerFrying.mp3" preload='true'></audio> -->
                <!-- <a-asset-item response-type="arraybuffer" src="assets/sound/1.ogg"></a-asset-item> -->
                <a-asset-item id="burgerCookingSound" src='assets/sound/burgerFrying.mp3' response-type="arraybuffer" crossorigin="anonymous" preload='true'></a-asset-item>
                <a-asset-item id="bottomBunObj" src="/assets/models/botBun.obj"></a-asset-item>
                <a-asset-item id="pattyObj" src="/assets/models/patty.obj"></a-asset-item>
                <a-asset-item id="cheeseObj" src="/assets/models/cheese.obj"></a-asset-item>
                <a-asset-item id='topBunObj' src='/assets/models/topBun.obj'></a-asset-item>

                <a-asset-item id="stoveOBJ" src="assets/OBJs/stove.obj"></a-asset-item>
                <a-asset-item id="stoveTexture" src="assets/Texture/VR/stovetexture.png"></a-asset-item>
                <a-asset-item id="floorOBJ" src="assets/OBJs/floor.obj"></a-asset-item>
                <a-asset-item id="floorTexture" src="assets/Texture/VR/floortexture.png"></a-asset-item>
                <a-asset-item id="wallOBJ" src="assets/OBJs/walls.obj"></a-asset-item>
                <a-asset-item id="wallTexture" src="assets/Texture/VR/walltexture.png"></a-asset-item>
                <a-asset-item id="counterTexture" src="assets/Texture/VR/countertexture.png"></a-asset-item>
                <a-asset-item id="counterOBJ" src="assets/OBJs/counter.obj"></a-asset-item>
                
                <a-mixin id='pattyMixin' 
                    material='color:#b33939'
                    vr-element-info='elemType:2'
                    scale='0.02 0.02 0.018'
                    >
                </a-mixin>
                <a-mixin id='bottomBunMixin' 
                    material='color:#cd6133'
                    scale='0.02 0.02 0.02'
                    vr-element-info='elemType:1' 
                    >
                </a-mixin>

                <a-mixin id='cheeseMixin'
                    material='color:#ffb142'
                    vr-element-info='elemType:3'
                    scale='0.02 0.02 0.02'>
                </a-mixin>

                <a-mixin id='topBunMixin'
                    material='color:#cd6133'
                    scale='0.02 0.02 0.02'
                    vr-element-info='elemType:4'>
                </a-mixin>
                
            </a-assets>

            <!--<a-entity environment="preset: default"></a-entity>-->

            <a-entity id='gameManager' vr-game-manager vr-websocket></a-entity>

            <!-- <a-entity sound="src:#testSound; loop:true; autoplay:true;"></a-entity> -->


            <a-entity id="cameraRig" networked="template: #rigTemplate; showLocalTemplate: false">
                <a-camera id="camera" look-controls position="0 2.0 0">
                </a-camera>

                <a-entity id="leftHand" class='hand' hand-controls="hand: left; handModelStyle: lowPoly; color: #ffcccc" static-body="shape: box;
                halfExtents: 0.15 0.18 0.04;" vr-grab></a-entity>
                
                <a-entity id="rightHand" class='hand' hand-controls="hand: right; handModelStyle: lowPoly; color: #ffcccc" static-body="shape: box;
                halfExtents: 0.15 0.18 0.04;" vr-grab>
                </a-entity>
            </a-entity>

            
                <a-obj-model id='bb_0'
                    src="#bottomBunObj" 
                    class='grabbable' 
                    mixin='bottomBunMixin' 
                    position='0.25 1.2 -0.6' 
                    dynamic-body='shape:auto; mass:500' 
                    vr-burger-info 
                    >
                        <a-obj-model id='ptty_0' src="#pattyObj" mixin='pattyMixin' scale='1 1 1' position='0 1.6 0'></a-obj-model>
                        <a-obj-model id='tb_0' src='#topBunObj' mixin='topBunMixin' scale='1 1 1' position='0 2.6 0'></a-obj-model>
                </a-obj-model>

                <a-obj-model id='bb_1'
                    src="#bottomBunObj" 
                    class='grabbable' 
                    mixin='bottomBunMixin' 
                    position='-0.25 1.8 -0.6' 
                    dynamic-body='shape:auto; mass:501' 
                    vr-burger-info
                    >
                        <a-obj-model id='ptty_1' src="#pattyObj" mixin='pattyMixin' scale='1 1 1' position='0 1.6 0'></a-obj-model>
                        <a-obj-model id='chz_0' src="#cheeseObj" mixin='cheeseMixin' scale='1 1 1' position='0 2.6 0'></a-obj-model>
                        <a-obj-model id='tb_1' src='#topBunObj' mixin='topBunMixin' scale='1 1 1' position='0 2.7 0'></a-obj-model>
                </a-obj-model>

                <a-obj-model id='bb_2'
                    src="#bottomBunObj" 
                    class='grabbable' 
                    mixin='bottomBunMixin' 
                    position='-0 1.5 -0.8' 
                    dynamic-body='shape:auto; mass:502' 
                    vr-burger-info
                    >
                        <a-obj-model id='ptty_1' src="#pattyObj" mixin='pattyMixin' scale='1 1 1' position='0 1.6 0'></a-obj-model>
                        <a-obj-model id='ptty_2' src="#pattyObj" mixin='pattyMixin' scale='1 1 1' position='0 2.6 0'></a-obj-model>
                        <a-obj-model id='chz_0' src="#cheeseObj" mixin='cheeseMixin' scale='1 1 1' position='0 3.6 0'></a-obj-model>
                        <a-obj-model id='tb_1' src='#topBunObj' mixin='topBunMixin' scale='1 1 1' position='0 3.8 0'></a-obj-model>
                </a-obj-model>

            
            
            
            <!-- <a-obj-model id='ptty_0'  class='grabbable' src="#pattyObj" mixin='pattyMixin' position='0 1.370 -0.614' dynamic-body='shape:box'></a-obj-model>
            <a-obj-model id='chz_0' src="#cheeseObj" class='grabbable' mixin='cheeseMixin' material='color:#ffb142' scale='0.02 0.02 0.02' position='-0.333 1.570 -0.614' dynamic-body='shape:box'></a-obj-model>
            <a-obj-model id='testTB' src='#topBunObj' class='grabbable' mixin='topBunMixin' position='0.33 1.370 -0.614' dynamic-body='shape:box'></a-obj-model> -->

            
            <!-- <a-box id='boxOne' height='1' width='1' depth='1'
                material="color:blue"
                position='0 0.90 -1.05'
                static-body>
            </a-box>

            <a-box id='grabBox' class='grabbable' height='0.2' width='0.2' depth='0.2'
                material="color:pink"
                position='0 1.6 -0.672'
                dynamic-body>
            </a-box> -->

            <a-entity id='ticketWall' 
                geometry='primitive:plane; height: 0.8; width: 1.5'
                position='0.138 1.582 -1.113'
                rotation='0 0 0'
                material='color:#f7f1e3'>
                    <a-entity id='testTicket'
                        geometry='primitive:plane; height:0.25; width: 0.19'
                        position='0 0 0.01'
                        rotation='0 0 0'
                        material='color:yellow'>
                    </a-entity>
            </a-entity>
            
            <a-entity id='floor' class=''
                    obj-model="obj: #floorOBJ;"
                    position='0 -0.5 7.210'
                    material='src: url(/assets/Texture/VR/floortexture.png)'>
            </a-entity>


            <a-entity id='wall' class=''
                    obj-model="obj: #wallOBJ;"
                    position='0 -0.3 7.210'
                    material='src: url(/assets/Texture/VR/walltexture.png)'>
            </a-entity>
                
            <a-box id='makePattyButton' class='button'
                height='0.1' 
                width='0.1' 
                depth='0.02' 
                material='color:purple' 
                position='0.350 1.310 -0.346'
                static-body
                >
                <a-entity id='buttonRaycaster' class='button'
                    raycaster='objects: .hand; showLine: true; far: 0.03;'
                    line="color: orange; opacity: 0.8"
                    position='0 0 0'
                    rotation='180 0 0'
                    vr-make-patty>
                </a-entity>
            </a-box>

            <a-box id='makeCheeseButton' class='button'
                height='0.1' 
                width='0.1' 
                depth='0.02' 
                material='color:yellow' 
                position='0.486 1.310 -0.346'
                static-body
                >
                <a-entity id='buttonRaycaster' class='button'
                    raycaster='objects: .hand; showLine: true; far: 0.03;'
                    line="color: orange; opacity: 0.8"
                    position='0 0 0'
                    rotation='180 0 0'
                    vr-make-cheese>
                </a-entity>
            </a-box>
                
            </a-entity>

            <a-entity id="sendOrderPad" geometry="primitive: cylinder; height: 0.01; radius: 0.1" material="color: blue" position="-0.77 1.001 -0.575">
                <a-entity id='sendOrderRayCast' raycaster='objects:.grabbable; showLine:true; far:0.03' line='color:red;' rotation='90 0 0' vr-send-order></a-entity>
            </a-entity>

            <a-plane id='floor' height='30' width='30'
                material = 'color:white; opacity:0.0;'
                postion = '0 0 0'
                rotation = '-90 0 0'
                static-body>
            </a-plane>


            <a-entity id='kitchenCounters' position='0 0 -0.75' rotation='0 0 0'>
                <!--<a-box id='counterOne' class='counter'
                    height='1.0' width='5.0' depth='1.0'
                    position='0 0.5 0'
                    rotation='0 0 0'
                    material='color: white'
                    static-body>
                </a-box>-->
                <a-entity id='counterOne' class='counter'
                            obj-model="obj: #counterOBJ;"
                            position='0 0.0 0'
                            material='src: url(/assets/Texture/VR/countertexture.png)'
                            static-body
                            scale='0.07 0.07 0.07'></a-entity>
                <a-entity id='counterTwo' class='counter'
                            obj-model="obj: #counterOBJ;"
                            position='2. 0.0 0'
                            material='src: url(/assets/Texture/VR/countertexture.png)'
                            static-body
                            scale='0.07 0.07 0.07'></a-entity>
                <a-entity id='counterThree' class='counter'
                            obj-model="obj: #counterOBJ;"
                            position='3. 0.0 0'
                            material='src: url(/assets/Texture/VR/countertexture.png)'
                            static-body
                            scale='0.07 0.07 0.07'></a-entity>
                <a-entity id='counterFour' class='counter'
                            obj-model="obj: #counterOBJ;"
                            position='-1. 0.0 0'
                            material='src: url(/assets/Texture/VR/countertexture.png)'
                            static-body
                            scale='0.07 0.07 0.07'></a-entity>
                <a-entity id='counterFive' class='counter'
                            obj-model="obj: #counterOBJ;"
                            position='-2. 0.0 0'
                            material='src: url(/assets/Texture/VR/countertexture.png)'
                            static-body
                            scale='0.07 0.07 0.07'></a-entity>
               <!-- <a-box id='stoveTop' class='hotSurface'
                        height='0.02' width='0.5' depth='1.0'
                        position='0.6 1 0'
                        roation='0 0 0'
                        material='color: grey;'
                        static-body>
                    </a-box>-->
                <a-entity id='stoveVisual'
                    obj-model="obj: #stoveOBJ;"
                    position='1. 0.0 0'
                    material='src: url(/assets/Texture/VR/stovetexture.png)'
                    scale='0.07 0.07 0.07'>

                </a-entity>
                <a-box id='stoveTop' class='hotSurface'
                        height='0.02' width='1' depth='1.0'
                        position='0.992 0.898 0'
                        roation='0 0 0'
                        visible='false'
                        material='color: grey;'
                        static-body>
                    </a-box>
            </a-entity>
            <script src="/socket.io/socket.io.js"></script>
            <script src="js/vr-networking.js"></script>
        </a-scene>
    </body>
</html>